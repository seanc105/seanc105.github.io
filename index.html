<!DOCTYPE html>
<html = style="height: 100%;">
  <head>
    <title>My Diablo Map v2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="scripts/leaflet/leaflet.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <script src="scripts/leaflet/leaflet.js"></script>
    <script src="scripts/database.js"></script>
    <script src="scripts/popup_contents.js"></script>
    <script src="scripts/handle_uri.js"></script>
    <script src="scripts/draw_map.js"></script>
  </head>
  
  <body style="height: 100%;margin: 0;">
    <div id="map" style="width: 100%; height: 100%; background: #000000;">
      <div class="btn-group position-absolute top-0 start-50 translate-middle-x" style="z-index: 1001" >
        <button type="buttons" id="allbus" class="btn btn-light" onclick="toggle_labels()">Toggle all location names</button>
      </div>
    </div>
    <script type="text/javascript">
    //Creating the Map
    var map = L.map('map').setView([0, 0], 0);
    L.tileLayer('map/{z}/{x}/{y}.png', {
      continuousWorld: false,
      noWrap: true,  
      minZoom: 3,
      maxZoom: 5,
    }).addTo(map);

    //Coordinate Finder
    var marker = L.marker([0, 0], {
      draggable: true,
    }).addTo(map);
    marker.bindPopup('LatLng Marker');
    marker.on('dragend', function(e) {
      marker.getPopup().setContent(marker.getLatLng().toString()).openOn(map);
    });

    // Center map if uri changed
    checkUri(L);
    
    //Markers
    draw_map(map, L);
    </script>
  </body>
</html>
